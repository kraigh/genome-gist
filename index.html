<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Extract clinically relevant SNPs from your genome file. Privacy-first: your data never leaves your browser." />
    <title>GenomeGist - Extract the gist of your genome</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ§¬</text></svg>" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <div class="page-background"></div>
    <div class="container">
      <header>
        <div class="logo">
          <img src="/dna.png" alt="" class="logo-icon" />
          <h1>GenomeGist</h1>
        </div>
        <p class="tagline">Extract the gist of your genome.</p>
      </header>

      <main>
        <section id="tool" class="tool-section card">
          <div id="upload-zone" class="upload-zone">
            <div class="upload-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- File outline -->
                <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M14 2V8H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <!-- Gear icon -->
                <circle cx="12" cy="15" r="2" stroke="currentColor" stroke-width="1.5"/>
                <path d="M12 11.5V12.5M12 17.5V18.5M14.5 13L13.6 13.6M10.4 16.4L9.5 17M15 15H14M10 15H9M14.5 17L13.6 16.4M10.4 13.6L9.5 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
            <p class="upload-text">Drag and drop your genome file here</p>
            <p class="upload-subtext">or click to browse</p>
            <p class="upload-formats">Supports: 23andMe (.txt)</p>
            <p class="upload-privacy">Your file stays on your device â€” never uploaded or shared</p>
            <input type="file" id="file-input" accept=".txt,.csv" hidden />
          </div>

          <div id="status" class="status" hidden>
            <div class="status-icon">
              <svg class="spinner" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" opacity="0.2"/>
                <path d="M12 2C6.47715 2 2 6.47715 2 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <p id="status-text"></p>
          </div>

          <div id="preview" class="preview" hidden>
            <div class="preview-header">
              <svg class="preview-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13 3V8C13 8.55228 13.4477 9 14 9H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div class="preview-info">
                <p class="preview-format">Format detected: <strong id="detected-format">23andMe v5</strong></p>
                <p class="preview-count">Total variants in file: <strong id="variant-count">0</strong></p>
              </div>
            </div>

            <div class="category-filter">
              <label class="filter-label">Choose your report</label>

              <div class="preset-options">
                <label class="preset-option" data-tier="free">
                  <input type="radio" name="category-preset" value="demo" checked />
                  <span class="preset-radio"></span>
                  <span class="preset-content">
                    <span class="preset-name">
                      Free Demo
                      <span class="preset-badge preset-badge-free">Free</span>
                    </span>
                    <span class="preset-desc">~15 common SNPs including MTHFR, APOE, COMT</span>
                  </span>
                </label>
                <label class="preset-option" data-tier="paid">
                  <input type="radio" name="category-preset" value="wellness" />
                  <span class="preset-radio"></span>
                  <span class="preset-content">
                    <span class="preset-name">
                      Wellness Report
                      <span class="preset-badge preset-badge-paid">Full Access</span>
                    </span>
                    <span class="preset-desc">Nutrition, methylation, neurotransmitters, detox</span>
                  </span>
                </label>
                <label class="preset-option" data-tier="paid">
                  <input type="radio" name="category-preset" value="full" />
                  <span class="preset-radio"></span>
                  <span class="preset-content">
                    <span class="preset-name">
                      Complete Report
                      <span class="preset-badge preset-badge-paid">Full Access</span>
                    </span>
                    <span class="preset-desc">All categories including drug response, cardiovascular, and immune</span>
                  </span>
                </label>
              </div>

              <!-- Token input section (shown when paid tier selected without valid token) -->
              <div id="token-section" class="token-section" hidden>
                <div class="token-prompt">
                  <p>Full Access required for this report.</p>
                  <div class="token-input-row">
                    <input type="text" id="token-input" class="token-input" placeholder="Enter your token (gg_...)" />
                    <button id="token-validate-btn" class="btn btn-primary btn-sm">Validate</button>
                  </div>
                  <p class="token-hint">
                    Don't have a token? <a href="#" id="purchase-link">Get Full Access ($19.99)</a>
                  </p>
                </div>
                <div id="token-status" class="token-status" hidden></div>
              </div>

              <!-- Token active badge (shown when valid token stored) -->
              <div id="token-active" class="token-active" hidden>
                <svg class="token-active-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Session active</span>
                <span id="session-info" class="session-info"></span>
                <button id="token-clear-btn" class="token-clear-btn">Clear</button>
              </div>

              <details class="category-details">
                <summary>Customize categories</summary>
                <div class="category-checkboxes" id="category-checkboxes">
                  <!-- Generated dynamically by JavaScript -->
                </div>
              </details>
            </div>

            <div class="preview-estimate">
              <p>Estimated matches: <strong id="estimate-count">0</strong> variants</p>
            </div>

            <div class="preview-actions">
              <button id="back-btn" class="btn btn-secondary">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Process Different File
              </button>
              <button id="extract-btn" class="btn btn-primary">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5M9 14L11 16L15 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Extract Variants
              </button>
            </div>
          </div>

          <div id="results" class="results" hidden>
            <div class="results-header">
              <svg class="results-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <p id="results-summary"></p>
            </div>

            <div class="format-selector">
              <label class="format-label">Output format:</label>
              <div class="format-options">
                <label class="format-option">
                  <input type="radio" name="output-format" value="detailed" checked />
                  <span class="format-radio"></span>
                  <span class="format-content">
                    <span class="format-name">Detailed</span>
                    <span class="format-desc">Human-readable with annotations</span>
                  </span>
                </label>
                <label class="format-option">
                  <input type="radio" name="output-format" value="compact" />
                  <span class="format-radio"></span>
                  <span class="format-content">
                    <span class="format-name">Compact</span>
                    <span class="format-desc">AI-optimized, smaller file</span>
                  </span>
                </label>
                <label class="format-option">
                  <input type="radio" name="output-format" value="minimal" />
                  <span class="format-radio"></span>
                  <span class="format-content">
                    <span class="format-name">Minimal</span>
                    <span class="format-desc">CSV format, smallest size</span>
                  </span>
                </label>
              </div>
            </div>

            <div class="download-row">
              <button id="download-btn" class="btn btn-primary">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 15V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V15M12 3V15M12 15L7 10M12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Download Results
              </button>
              <span id="file-size" class="file-size"></span>
            </div>
          </div>

          <div id="error" class="error" hidden>
            <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 8V12M12 16H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p id="error-text"></p>
          </div>
        </section>

        <section class="info-section card">
          <h2>What is this?</h2>
          <p>
            GenomeGist extracts clinically and wellness-relevant genetic variants (SNPs) from raw
            genome files exported from services like 23andMe. The output is a compact file
            ready for analysis with AI tools like ChatGPT or Claude.
          </p>

          <h3>What are SNPs?</h3>
          <p>
            SNPs (single nucleotide polymorphisms, pronounced "snips") are small genetic variations
            that make you unique. Your genome file from 23andMe contains data on hundreds of thousands
            of these variants. Most are unremarkable, but some are associated with health traits,
            drug metabolism, or nutritional needs.
          </p>
          <p>
            GenomeGist extracts just the variants that researchers have linked to meaningful traits,
            filtering out the noise so you can focus on what matters.
          </p>

          <h3>How to use the output</h3>
          <p>
            The extracted file is designed to be uploaded to AI assistants for personalized analysis.
            You can:
          </p>
          <ul>
            <li>Ask about specific variants and what they mean</li>
            <li>Get personalized supplement or nutrition suggestions based on your genetics</li>
            <li>Understand how you might respond to certain medications</li>
            <li>Learn about your genetic predispositions for various health traits</li>
          </ul>
          <p>
            The compact output format keeps the file small enough to upload without hitting
            context limits, while including enough information for meaningful analysis.
          </p>
        </section>

        <section class="categories-section card">
          <h2>What's Included</h2>

          <div class="tier-comparison">
            <div class="tier-card tier-free">
              <div class="tier-badge">Free</div>
              <h3>Demo Report</h3>
              <p class="tier-count">~15 variants</p>
              <p class="tier-desc">
                A sample of well-known SNPs including MTHFR, APOE, COMT, and a few others.
                Great for trying out the tool.
              </p>
            </div>
            <div class="tier-card tier-paid">
              <div class="tier-badge">Full Access</div>
              <h3>Complete Report</h3>
              <p class="tier-count">1,000+ variants</p>
              <p class="tier-desc">
                Comprehensive coverage across all categories. Process as many files
                as you like with unlimited exports for 24 hours.
              </p>
              <p class="tier-price">$19.99</p>
            </div>
          </div>

          <h3 class="categories-heading">Categories in Full Report</h3>
          <p class="categories-intro">
            The complete report covers these categories. Select Wellness for lifestyle
            optimization, or Full Report to include all.
          </p>

          <div class="category-grid">
            <div class="category-item">
              <h3>Methylation</h3>
              <p>MTHFR and related genes affecting folate metabolism and homocysteine levels.
                 Relevant for B-vitamin supplementation.</p>
            </div>
            <div class="category-item">
              <h3>Nutrition</h3>
              <p>Vitamin D metabolism, lactose tolerance, obesity risk factors, and caffeine
                 sensitivity.</p>
            </div>
            <div class="category-item">
              <h3>Neurotransmitters</h3>
              <p>COMT, BDNF, and dopamine-related variants affecting mood, focus, and stress
                 response.</p>
            </div>
            <div class="category-item">
              <h3>Drug Response</h3>
              <p>CYP2C19, CYP2D6, and other genes affecting how you metabolize medications.
                 Important for personalized medicine.</p>
            </div>
            <div class="category-item">
              <h3>Cardiovascular</h3>
              <p>APOE and other markers associated with heart health and lipid metabolism.</p>
            </div>
            <div class="category-item">
              <h3>Detoxification</h3>
              <p>Genes involved in clearing toxins and environmental compounds from your body.</p>
            </div>
            <div class="category-item">
              <h3>Immune</h3>
              <p>Immune system function and inflammation markers that may affect health outcomes.</p>
            </div>
          </div>
        </section>

        <section class="faq-section card">
          <h2>Frequently Asked Questions</h2>

          <details class="faq-item">
            <summary>How do I get my genome file?</summary>
            <p>
              If you've done a DNA test with 23andMe, you can download your raw data from their
              website. Go to Settings &gt; Privacy &gt; Download Your Data. The file will be a .txt
              file containing your genetic data.
            </p>
          </details>

          <details class="faq-item">
            <summary>Is my data safe?</summary>
            <p>
              Yes. All processing happens locally in your browser. Your genome file is never
              uploaded to any server. The only network requests this tool makes are to load the
              application itself and the SNP reference list.
            </p>
            <p>
              The <a href="https://github.com/kraigh/genomegist" target="_blank" rel="noopener">source code</a>
              is publicly available for review. You can audit the code yourself or run it locally.
            </p>
          </details>

          <details class="faq-item">
            <summary>What AI tools work with the output?</summary>
            <p>
              The output file works with any AI assistant that accepts file uploads: ChatGPT,
              Claude, Google Gemini, and others. The "Compact" format is optimized for AI
              context limits, keeping the file small while retaining essential information.
            </p>
          </details>

          <details class="faq-item">
            <summary>Why are some variants marked "no-call"?</summary>
            <p>
              A "no-call" means the genotyping array couldn't reliably determine your genotype
              at that position. This can happen due to sample quality or technical limitations.
              These variants are included but marked so you know the data is uncertain.
            </p>
          </details>

          <details class="faq-item">
            <summary>What's the difference between Wellness and Full Report?</summary>
            <p>
              Wellness Only includes nutrition, methylation, neurotransmitter, and detoxification
              variants â€” useful for lifestyle optimization. Full Report adds pharmacogenomics
              (drug response), cardiovascular, and immune markers, which have more direct
              medical implications.
            </p>
          </details>

          <details class="faq-item">
            <summary>Can I use this for medical decisions?</summary>
            <p>
              No. This tool is for educational and research purposes only. Genetic variants are
              just one factor in health outcomes. Always consult a healthcare provider or genetic
              counselor for medical advice.
            </p>
          </details>
        </section>

        <section class="privacy-section card">
          <div class="privacy-header">
            <svg class="privacy-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h2>Privacy</h2>
          </div>
          <p>
            <strong>Your genetic data never leaves your browser.</strong> All processing happens
            locally on your device. We don't upload, store, or transmit your genome file.
            The only network requests are for loading the application itself.
          </p>
          <p>
            The <a href="https://github.com/kraigh/genomegist" target="_blank" rel="noopener">source code</a>
            is publicly available. You can audit the code to verify these claims, or run it locally
            on your own machine.
          </p>
        </section>

        <section class="pricing-section card">
          <h2>Pricing</h2>
          <div class="pricing-grid">
            <div class="pricing-tier">
              <h3>Free Demo</h3>
              <p class="tier-desc">Try the tool with ~15 common SNPs</p>
              <p class="price">$0</p>
            </div>
            <div class="pricing-tier pricing-tier-highlight">
              <h3>Full Access</h3>
              <p class="tier-desc">1,000+ variants across all categories</p>
              <p class="price">$19.99</p>
            </div>
          </div>
          <p class="pricing-note">
            Full Access includes 3 sessions. Each session gives you 24 hours of unlimited
            access â€” process multiple files, export with any settings, as many times as you need.
          </p>
        </section>

        <section id="disclaimer" class="disclaimer-section card">
          <h2>Disclaimer</h2>
          <p>
            <strong>This tool is for research and educational purposes only.</strong>
            The information provided is NOT medical advice. Genetic variants may have different
            effects depending on other genetic and environmental factors.
          </p>
          <p>
            Consult a healthcare provider or genetic counselor for interpretation of genetic data.
            The annotations are derived from public databases (ClinVar, PharmGKB, SNPedia) and
            may not reflect the most current scientific understanding.
          </p>
          <p>
            GenomeGist does not diagnose, treat, cure, or prevent any disease. Do not make
            health decisions based solely on this information.
          </p>
        </section>
      </main>

      <footer>
        <p>
          <span id="version-text">GenomeGist</span> Â·
          <a href="/terms.html">Terms of Service</a> Â·
          <a href="/privacy.html">Privacy Policy</a> Â·
          <a href="#disclaimer">Disclaimer</a>
        </p>
        <p class="attribution">
          For research and educational use only Â·
          DNA icon by <a href="https://www.flaticon.com/free-icons/dna" target="_blank" rel="noopener">Flaticon</a>
        </p>
      </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
